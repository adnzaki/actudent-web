import{_ as M,aC as N,a as U,b as r,C as g,c as D,x as u,aD as P,aE as B,ay as E,o as _,k as K,g as c,f as l,n as p,p as h,v as z,m as F,L as x,t as y,aF as R,aG as H,Q as S,h as L,i as C,aH as A,d as G,J,s as O,aI as I,O as j,aJ as k}from"./index.9a2eb67c.js";import{Q as W,a as X}from"./QLayout.db8d9ace.js";var Y="/app/assets/company-logo.6eb4ff1e.png";const Z={name:"LoginPage",beforeRouteEnter(a,o,d){let e="/login";k==="1"?e="/home":(k==="2"||k==="0")&&(e="/teacher/home"),a.path==="/login"&&N.value?d({path:e}):d()},setup(){const a=U();localStorage.getItem(r.userLang);const o=g(""),d=g(""),e=g({}),n=g(""),m=g("black"),i=g(!1),b=g(!1);return{usernameLabel:D(()=>`Username / NIG (${u("login_nig")})`),conf:r,companyLogoPushLeft:a.screen.lt.sm?"left: 27%":"left: 30%",styleSelector(t){const f={light:{bgImage:"bg-img-light",card:"",icon:"primary",label:"",input:"auth-input",inputColor:"input-color",btn:"blue",poweredLogo:"powered-style"},dark:{bgImage:"bg-img-dark",card:"auth-box-dark",icon:"blue-1",label:"blue-1",input:"auth-input-dark",inputColor:"input-color-dark",btn:"cyan-10",poweredLogo:""}};return a.cookies.get("theme")==="dark"?f.dark[t]:f.light[t]},validate(){n.value="",i.value=!0;const t=()=>i.value=!1;if(o.value===""||d.value==="")n.value=u("userpassword_wajib"),m.value="negative",setTimeout(t,6e3);else{const f={username:o.value,password:d.value,remember:b.value?1:0};n.value=u("mengautentikasi"),m.value=a.cookies.get("theme")==="dark"?"white":"black",P.post(`${r.coreAPI}login/validasi`,f,{transformRequest:[v=>B(v)]}).then(v=>{const s=v.data;if(s.msg==="expired")m.value="negative",n.value=s.note;else if(s.msg==="valid"){n.value=u("login_sukses"),m.value="positive",b.value&&(r.cookieExp*=12*30);const Q=new Date,V=Q.getTime(),q=V+r.cookieExp,T=new Date(q),w={expires:T.toUTCString(),path:"/",sameSite:"None",secure:!0};a.cookies.set(r.cookieName,s.token,w),a.cookies.set(r.userType,s.level,w),localStorage.setItem(r.userLang,s.lang),s.level==="1"?(window.location.href=r.homeUrl(),localStorage.removeItem("grade_id")):(s.level==="2"||s.level==="0")&&(localStorage.setItem("grade_id",s.grade),window.location.href=r.teacherHomeUrl())}else s.msg==="unauthorized"?(m.value="negative",n.value=u("salah_akses"),setTimeout(t,8e3)):(m.value="negative",n.value=u("invalid_login"),setTimeout(t,4e3))})}},username:o,password:d,error:e,msg:n,msgClass:m,showMsg:i,rememberMe:b,btnStyle:E({fontSize:"18px",width:"calc(100% - 5px)",borderRadius:a.screen.lt.sm?"28px":"5px"}),pleaseLoginText:a.screen.lt.sm?"q-pb-sm":"",brandLogo:()=>{let t;return a.cookies.get("theme")==="dark"?t="siabsen-logo-white":t="siabsen-logo",`${t}.png`}}}},$={class:"q-pa-md q-mt-md row items-start q-gutter-md"},ee={id:"company-logo",class:"col-12 col-md-4 col-sm-8 offset-md-4 offset-sm-2"};function ae(a,o,d,e,n,m){return _(),K(X,{view:"hHh lpR fFf"},{default:c(()=>[l(W,{class:p(["bg-login",e.styleSelector("bgImage")])},{default:c(()=>[h("div",$,[l(z,{class:p(["auth-box col-md-4 col-sm-8 offset-md-4 offset-sm-2",e.styleSelector("card")])},{default:c(()=>[l(F,null,{default:c(()=>[l(x,{src:e.brandLogo(),width:"30%",ratio:1,class:"app-logo"},null,8,["src"]),h("p",{class:p(["text-center text-uppercase q-pt-lg",e.pleaseLoginText])},y(a.$t("silakan_login")),3),l(R,{class:"q-gutter-xs",onSubmit:H(e.validate,["prevent"])},{default:c(()=>[l(S,{filled:"",class:"q-mb-md",modelValue:e.username,"onUpdate:modelValue":o[0]||(o[0]=i=>e.username=i),label:e.usernameLabel,onKeyup:L(e.validate,["enter"]),"label-color":e.styleSelector("label"),color:e.styleSelector("icon")},{prepend:c(()=>[l(C,{name:"mail_outline"})]),_:1},8,["modelValue","label","onKeyup","label-color","color"]),l(S,{type:"password",filled:"",modelValue:e.password,"onUpdate:modelValue":o[1]||(o[1]=i=>e.password=i),label:"Password",onKeyup:L(e.validate,["enter"]),"label-color":e.styleSelector("label")},{prepend:c(()=>[l(C,{name:"vpn_key"})]),_:1},8,["modelValue","onKeyup","label-color"]),l(A,{color:"primary","keep-color":"",class:"q-mb-lg",modelValue:e.rememberMe,"onUpdate:modelValue":o[2]||(o[2]=i=>e.rememberMe=i),label:a.$t("remember_me")},null,8,["modelValue","label"]),e.showMsg?(_(),G("p",{key:0,style:{"margin-top":"-20px"},class:p(`text-bold text-${e.msgClass}`)},y(e.msg),3)):J("",!0),l(O,{color:e.styleSelector("btn"),onClick:e.validate,style:I(e.btnStyle)},{default:c(()=>[j(y(a.$t("login")),1)]),_:1},8,["color","onClick","style"])]),_:1},8,["onSubmit"])]),_:1})]),_:1},8,["class"]),h("div",ee,[l(x,{class:p(e.styleSelector("poweredLogo")),src:Y,width:"40%",style:I(e.companyLogoPushLeft)},null,8,["class","style"])])])]),_:1},8,["class"])]),_:1})}var se=M(Z,[["render",ae]]);export{se as default};
